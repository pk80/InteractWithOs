# Interaction with Operating System with Python

## Interpreted Language vs Compiled Language

Examples of Compiled programming languages : C, C++, Go, Rust

- They relay on compilers
  Examples of Interpreted programming languages : Python, Ruby, JavaScript, Bash, PowerShell
- They relay on interpreters
  Examples of mixed approach (both compiler and interpreter) programming languages : Java, C#

## Running a Python Script

- Command prompt to run a python file : python3 <file_name> on linux & macOS, <file_name> on windows
- file extension : .py
- commands:
    - exit() or Ctl+D on linux & macOs, Ctl+Z on windows
    - cat (shows contents of files on linux / macOS)
    -

## Code reusability

- Modules : file names

## Code Editors or IDEs

- Editors : Vim, Notepad(Widows), TextEdit(MacOs), Nano(Linux,MacOs)
- Advanced Editors : Atom, Notepad++, Sublime Text, VisualStudio
- Featured Editors : Eclipse, PyCharm

- Common editor for all platforms : Eclipse, PyCharm, Sublime Text, VisualStudio

## Python Specific Editors

- PyCharm, Spyder, Thonny

## Create, activate and deactivate virtual environments for Python

```txt
python3 -m venv myenv
# activate on mac/linux
myenv/bin/activiate 
# activate on windows
myenv/Scripts/activiate
# deactivate
deactivate
```

## Generate Requirements file list

```txt
pip freeze > requirements.txt
```

## Install Requirements file

```txt
pip install -r requirements.txt
```

## Module 2:

### Reading and Writing files

#### Programming with files

- Python interacting with files directly
- Data is usually stored on a disk and saved in files
- Absolute path is the full/real path to the resource in the file system
- Relative path is portion of path to show where it is located in relation to current working directory
-

#### Reading files

- open() function returns a file object
- readline() method reads one line from the file and returns as string
- read() method reads the entire file and returns as string
- close() method closes the file
- with (key word) statement to open a file will open file and executed the code within the with block and closes the
  file
  automatically at the end
- File descriptor: a token, generated by OS, that allows programs to do more operations with file
- File open and close method of working with files is a typical way, the best way is to use with statement
-

#### Iterating through files

- If the file is small, reading complete file by read or readlines methods are okay
- If the file is large, reading line by line is the best method to follow else it'll lead poor performance

#### Writing files

- File objects can be opened in several modes which is the second argument like :
    - 'r' (read only, default)
    - 'w' (write only, truncating the file first)
    - 'a' (appending content)
    - 'x' (creation mode, fails if the file already exists)
    - '+' (open for updating in reading and writing)
    - 'b' (binary mode)
    - 'r+' (read-write)
    - 'rt' (read only in text mode, default)
- If you open an already existing file for writing, it will automatically delete the content the moment the file is
  opened
- Write method returns the number of characters written to the file
- Third argument is encoding,
    - the default is the platform-dependent
    - locale.getencoding() gets the current encoding
    - if you need to open the text in a specific encoding, you must specify it
    - binary mode data is read and written as bytes objects
    - you cannot specify encoding when opening a file in binary mode
    - you have to have permission to write to the directory where you’re placing the file

#### Reading and Writing files

```python
# Lab work
guests = ["Bob", "Andrea", "Manuel", "Polly", "Khalid"]
# writing to file
with open('assets/guests.txt', 'w') as file:
    for i in guests:
        file.write(i + '\n')
# reading from file
rw_files.read_file('assets/guests.txt')
# updating file
new_guests = ['John', 'Rachel', 'Robert']
with open('assets/guests.txt', 'a') as file:
    for i in new_guests:
        file.write(i + '\n')
rw_files.read_file('assets/guests.txt')
# checked out
checked_out = ["Andrea", "Manuel", "Khalid"]
temp_list = []
with open("assets/guests.txt", 'r') as file:
    for g in file:
        temp_list.append(g.strip())
with open("assets/guests.txt", 'w') as file:
    for name in temp_list:
        if name not in checked_out:
            file.write(name + "\n")
rw_files.read_file('assets/guests.txt')
# check guest
check_guests = ['Bob', 'Andrea']
checked_in = []
with open('assets/guests.txt', 'r') as file:
    for g in file:
        if g.strip() in check_guests:
            checked_in.append(g.strip())
print(checked_in)
```

### File paths

- The specific location of a file on a computer or web server is called file path
- You can also use file paths to call environment variables such as libraries, applications, and even other languages
  like C+ or JavaScripts.
- Two types of file paths:
    - Relative file path (r/w file by name alone)
    - Absolute file path (r/w file by exact location/drive/dir/file_name)
- Programmers tend to avoid absolute file paths because the drive names can change from computer to computer
- Python programmers wrap directories using the command OS path to work around the platform differences
- File paths are most often used to save and load information
- You can use the forward slash for writing the file path in Python
- If you use backslash in a file path, you have to use it again to escape every instance
- Uses :
    - Save Information
    - Load Information (applications, env variables)

```python
import os

outputs = dict()
outputs['files_and_directories'] = os.listdir()
outputs['current_directory'] = os.getcwd()
```

### Managing files and directories

- os.remove(<file_name>) : remove the file
- os.rename(<old_name, new_name>) : rename / move the file
- os.path.exists(<file_name>) : check if file exists
- os.path.getsize(<file_name>) : get size of the file in bytes
- os.path.getmtime(<file_name>) : get last modified unix timestamp for the file
- datetime.datetime.fromtimestamp(timestamp) : convert timestamp to readable time
- os.path.abspath(<file_name>) : get the absolute path of the file
- os.getcwd() : get current working directory
- os.mkdir(<dir_lname>) : created new directory
- os.chdir(<new_dir>) : changes the directory
- os.rmdir(<dir_name>) : removes the directory
- os.listdir(<dir_name>): lists all files and subdirectories
- os.path.isfile(<file_name>) : checks if file_name is file or not
- os.path.isdir(<dir_name>) : checks if dir_name is dir or not
- os.path.join(<path>,<paths...>) : joins the path depending on the OS / underlying platform
- os.chmod()
- os module uses:
    - file operations (open,close,read,write,append)
    - directories (create,read,update,delete) and
    - permissions (create,read,update)

### Reading and writing csv files

- csv file: comma separated values, a common data format used to store data as segments of text separated by commas
- formats give data structure and computer loves structure
- parsing a file: analysing file's content to correctly structure the data

#### Reading and writing CSV files with dictionaries

- csv.DictReader()
- csv.DictWriter()

## MODULE 3

### Regular Expressions

- Also known as `regex` or `regexp`
- It is a search query for text that's expressed in string pattern
- It allows us to search for a text for string matching a specific pattern
- `grep` is case-sensitive
- `grep` is a command line regex tool
- Search is executed on the line basis but not on individual word

```
% grep thon <filename>
% grep -i thon <filename> # use -i to avoid case-sensitivity
```

- Reserved Characters : give extra meaning to the patterns that we create
    - Exs:
        - . sign : dot matches any character, it is said to ba a wildcard
        - ^ sign : caret/circumflex indicates the beginning, it is said to be an anchor character
        - $ sign : dollar indicates the end of the line, it is said to be an anchor character

```
% grep l.rts <filename>
% grep ^fruit <filename>
% grep cat$ <filename>
```

### Basic Regular Expressions

#### Simple matching

- Module used in `re`
- re.search(pattern, string) returns a match object
- `r` in pattern indicates raw-string (meaning no special chars)
- raw-string and normal string are exactly the same
- it's a good practise to use raw-strings in regular expressions in python
- `None` is a special value that python uses to show that there's not actual value there
- re.IGNORECASE option in search parameters ignores the case sensitivity

#### Wildcards and Character classes
- 

```
# Wildcards and Character classes
% print(re.search(r"[Pp]ython", "Python"))
% print(re.search(r"[a-z]way", "The end of the highway"))
% print(re.search(r"[a-z]way", "What a way to go"))
% print(re.search("cloud[a-zA-Z0-9]", "cloudy"))
% print(re.search("cloud[a-zA-Z0-9]", "cloud9"))

% print(re.search(r"[^a-zA-Z]", "This is a sentence with spaces."))
% print(re.search(r"[^a-zA-Z ]", "This is a sentence with spaces."))

% print(re.search(r"cat|dog", "I like cats."))
% print(re.search(r"cat|dog", "I love dogs!"))
% print(re.search(r"cat|dog", "I like both dogs and cats."))

% print(re.search(r"cat|dog", "I like cats."))
% print(re.search(r"cat|dog", "I love dogs!"))
% print(re.search(r"cat|dog", "I like both dogs and cats."))
% print(re.findall(r"cat|dog", "I like both dogs and cats."))

# Repetition Qualifiers
print(re.search(r"Py.*n", "Pygmalion"))
print(re.search(r"Py.*n", "Python Programming"))
print(re.search(r"Py[a-z]*n", "Python Programming"))
print(re.search(r"Py[a-z]*n", "Pyn"))

print(re.search(r"o+l+", "goldfish"))
print(re.search(r"o+l+", "woolly"))
print(re.search(r"o+l+", "boil"))

print(re.search(r"p?each", "To each their own"))
print(re.search(r"p?each", "I like peaches"))
```

- Character classes : written insided square brackets
- To match any characters that aren't in a group use caret sign inside square brackets like this [^a-z]
- To match either we use a pipe symbol like this `cat|dog`
- `.*` means it matches any character repeated as many times as possible including zero. This behavior in programming
  terms is called as greedy.
- `+` matches one or more occurrences of the character that comes before it
- `?` either zero or one occurrence of the character before it
- Escape character :
- `\.` matches dot in the string
- When we see a pattern that includes a backslash, it could be escaping a special regex character or a special string
  character
- `\w` matches any alphanumeric character including numbers, letters, and underscores
- `\d` for matching digits
- `\s` for matching white space characters like space, tab or new line
- `\b` for word boundaries and few others
- Regular Expressions in Action, Examples:
    - `r”\d{3}-\d{3}-\d{4}”` :matches U.S. phone numbers in the format 111-222-3333
    - `r”^-?\d*(\.\d+)?$”`  :matches any positive or negative number, with or without decimal places
    - `r”^/(.+)/([^/]+)/$”` :is often used to extract specific parts of URLs or file paths, such as the directory names
      or filenames

### Advanced Regular Expressions

- Capturing Groups : are portions of the pattern that are enclosed in parentheses
- result.group() method returns a tuple, can access elements by indexing
- first(0) index being the whole string followed by each element in the group
- More on Repetition qualifiers
- Extracting a PID using regexes in Python
- Splitting and Replacing

## MODULE 4

### Data Streams
- Standard streams : IO streams (input-output)
    - STDIN :
        - input('...') for python3 and raw_input('...') for python 2
        - raw_input will just get a string from a user, 
        - on the other hand input will actually perform basic maths on calling eval()
        - eval() is used to evaluate string expressions
    - STDOUT
    - STDERR
- Environment variables :
    - variables set in environment(shell command-line environment)
    - source of information saved in environment to use in the scripts
- Shell : a command-line interface used to interact with your operating system
    - bash (commonly used shell)
    - zsh
    - fish
- Check environmental variables from command-line prompt
    - env : returns all the environmental variables in the system
    - echo $PATH : returns all the paths stored
        - echo is a command to print text in linux
        - $ is prefixed to name of the variable to access its value
- Command-line arguments:
    - parameters passed to a program when it's started
    - these are useful for system administration tasks
    - cmd-line arguments are stored in sys module
    - each parameter is saved as separate element in a list
- Exit status / Return code:
    - value returned by a program to the shell in unix like OS
    - 0 : when process succeeds
    - echo $? : return the exit status
    - wc <filename> : returns lines, word & characters in the file

### Python Subprocesses
- Running system commands in Python
  - subprocess : run a system program from python script using functions provided
    - runt() : receives list of commands followed by other parameters
- Obtaining the output of a system command
- Advanced subprocess management 
  - 